@model Corno.Data.Transactions.ExamViewModel
@using Kendo.Mvc.UI
@{
    ViewBag.Title = "Show Exam Form No : " + Model.Id;
}
<div class="row">
    <div id="breadcrumb" class="col-md-12">
        <ol class="breadcrumb">
            <li><a href="#">Online Exam</a></li>
            <li><a href="#">Show Exam Form</a></li>
        </ol>
    </div>
</div>
@Html.ValidationSummary()
<div class="row">
    <div class="col-xs-12 col-sm-12">
        <div class="box ui-draggable ui-droppable">
            <div class="box-header">
                <div class="box-name">
                    <i class="fa fa-edit large"></i>
                    <span>Edit Exam Form No :  @Model.FormNo</span>
                </div>
                <div class="box-icons">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="expand-link">
                        <i class="fa fa-expand"></i>
                    </a>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
                <div class="no-move"></div>
            </div>
            <div class="box-content">
                @*@using (Html.BeginForm())*@
                @*{*@
                @Html.AntiForgeryToken()

                <div class="form-horizontal">
                    <div class="box-content">
                        <div class="form-group">
                            <div class="col-sm-2">
                                <button type="button" value="Index" class="btn btn-primary btn-label-left pull-left" onclick="location.href = '@Url.Action("Index", "Exam")'">
                                    <span><i class="fa fa-list-ul"></i></span>
                                    Back to List
                                </button>
                            </div>
                            <div class="col-sm-offset-8 col-sm-2">
                                <button type="submit" value="Edit" title="Save" onclick="PrintForm()" class="btn btn-primary btn-label-left pull-right">
                                    <span><i class="fa fa-print"></i></span>
                                    Print
                                </button>
                            </div>
                        </div>
                        <div id="printDiv">
                            <div class="panel panel-info">
                                <div class="panel-heading"><strong>PRN Details</strong></div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-2 col-xs-2 control-label">PRN :</label>
                                    <div class="col-sm-10 col-xs-10">
                                        @Html.DisplayFor(m => m.PrnNo)
                                    </div>
                                </div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-2 col-xs-2 control-label ">Student Name :</label>
                                    <div class="col-sm-10 col-xs-10">
                                        @Html.DisplayFor(m => m.StudentName)
                                    </div>
                                </div>
                            </div>
                            <div class="panel panel-info">
                                <div class="panel-heading"><strong>Exam Form Details</strong></div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-3 control-label">Form No <code>*</code>:</label>
                                    <div class="col-sm-2">
                                        @Html.DisplayFor(m => m.FormNo)
                                    </div>
                                    <label class="col-sm-offset-4 col-sm-1 control-label ">Date <code>*</code>:</label>
                                    <div class="col-sm-2">
                                        @string.Format("{0:dd-MMM-yyyy}", Model.Date)
                                    </div>
                                </div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-3 control-label">Bundle <code>*</code>:</label>
                                    <div class="col-sm-2">
                                        @Html.DisplayFor(m => m.Bundle)
                                    </div>
                                </div>
                            </div>
                       
                            <div class="panel panel-info">
                                @(Html.Kendo().Grid(Model.ExamSubjectViewModels.OrderBy(e => e.SubjectCode))
                                        .Name("ExamSubjectViewModels")
                                        .HtmlAttributes(new { style = "height:100%;" })
                                        .Columns(columns =>
                                        {
                                            //columns.Bound(c => c.RowSelector).Title("Select");
                                            columns.Bound(p => p.CoursePartId).Title("Course Part Code").Width(130);
                                            columns.Bound(p => p.CoursePartName).Title("Course Part").Width(150);
                                            columns.Bound(p => p.SubjectCode).Title("Subject Code").Width(120); 
                                            columns.Bound(p => p.SubjectName).Title("Subject");
                                            columns.Bound(p => p.MaxOptionalCount).Title("Max Optionals").Width(80).Hidden();
                                            columns.Bound(p => p.OptionalIndex).Hidden().Title("Optional Index").Width(80);
                                            columns.Bound(p => p.SubjectType).Title("Subject Type").Hidden();
                                            columns.Bound(p => p.InstanceId).Title("Instance").Hidden();
                                            columns.Bound(p => p.InstanceId).Title("ID").Hidden();
                                        })
                                        //.Sortable()
                                        .Groupable()
                                        //.Scrollable()
                                        //.Selectable()
                                        .DataSource(dataSource => dataSource
                                            .Ajax()
                                            //.Events(events => events.Error("onError"))
                                            .Group(group => group.Add(p => p.SubjectType))
                                            .Model(model =>
                                            {
                                                // Following line is important. Don't Delete. Model's id field needs to be assigned to value field.
                                                // Otherwise, Row will be deleted after cancel action of edit command.
                                                model.Id(p => p.SubjectCode);
                                                model.Field(p => p.SubjectName).Editable(false);
                                                model.Field(p => p.CoursePartId).Editable(false);
                                                model.Field(p => p.SubjectCode).Editable(false);
                                                model.Field(p => p.CoursePartName).Editable(false);
                                                model.Field(p => p.MaxOptionalCount).Editable(false);
                                                model.Field(p => p.OptionalIndex).Editable(false);
                                                model.Field(p => p.SubjectType).Editable(false);
                                                model.Field(p => p.InstanceId).Editable(false);
                                            })
                                            .Batch(true)
                                            .ServerOperation(false)
                                            .Read(read => read.Action("ReadExamSubjects", "Exam").Data("filterSubjects"))
                                        )
                                        .Events(events => events.DataBound("dataBound"))
                                )
                                <script>
                                    function filterSubjects() {
                                        return {
                                            prnNo: $("#PRNNo").val(),
                                            coursePartID: selectedCoursePartID,
                                        };
                                    }

                                    //function index(dataItem) {
                                    //    var data = $("#ExamSubjectViewModels").data("kendoGrid").dataSource.data();
                                    //    return data.indexOf(dataItem);
                                    //}

                                    //function onError(e, status) {
                                    //    if (e.status == "customerror") {
                                    //        //ClearForm();
                                    //        alert(e.errors);
                                    //    }
                                    //    else {
                                    //        alert("Generic server error.");
                                    //    }
                                    //}
                                </script>
                            </div>
                            <div class="panel panel-info">
                                <div class="panel-heading"><strong>Fee Details</strong></div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-3 control-label">Regular Exam Fee :</label>
                                    <div class="col-sm-1 text-right" id="divExamFee">
                                        @Html.DisplayFor(m => m.ExamFee)
                                    </div>
                                    <label class="col-sm-3 control-label">Backlog Exam Fee :</label>
                                    <div class="col-sm-1 text-right" id="divBacklogFee">
                                        @Html.DisplayFor(m => m.BacklogFee)
                                    </div>
                                    <label class="col-sm-3 control-label">CAP Fee :</label>
                                    <div class="col-sm-1 text-right" id="divCAPFee">
                                        @Html.DisplayFor(m => m.CapFee)
                                    </div>
                                </div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-3 control-label">Statement Of Marks Fee :</label>
                                    <div class="col-sm-1 text-right" id="divStatementOfMarksFee">
                                        @Html.DisplayFor(m => m.StatementOfMarksFee)
                                    </div>
                                    <label class="col-sm-3 control-label">Practical Fee :</label>
                                    <div class="col-sm-1 text-right" id="divPracticalFee">
                                        @Html.DisplayFor(m => m.PracticalFee)
                                    </div>
                                    <label class="col-sm-3 control-label">Dissertation Fee :</label>
                                    <div class="col-sm-1 text-right" id="divDissertationFee">
                                        @Html.DisplayFor(m => m.DissertationFee)
                                    </div>
                                </div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-3 control-label">Others Fee:</label>
                                    <div class="col-sm-1 text-right" id="divOthersFee">
                                        @Html.DisplayFor(m => m.OthersFee)
                                    </div>
                                    <label class="col-sm-3 control-label">Late Fee :</label>
                                    <div class="col-sm-1 text-right" id="divLateFee">
                                        @Html.DisplayFor(m => m.LateFee)
                                    </div>
                                    <label class="col-sm-3 control-label">Super Late Fee :</label>
                                    <div class="col-sm-1 text-right" id="divSuperLateFee">
                                        @Html.DisplayFor(m => m.SuperLateFee)
                                    </div>
                                </div>
                                <div class="form-group  has-feedback">
                                    <label class="col-sm-3 control-label">Environmental Examination Fee:</label>
                                    <div class="col-sm-1 text-right" id="divEnvironmentalExaminationFee">
                                        @Html.DisplayFor(m => m.EnvironmentalExaminationFee)
                                    </div>
                                    <label class="col-sm-3 control-label">Passing Certificate Fee :</label>
                                    <div class="col-sm-1 text-right" id="divCertificateOfPassingFee">
                                        @Html.DisplayFor(m => m.CertificateOfPassingFee)
                                    </div>
                                </div>
                                <hr />
                                <div class="form-group  has-feedback">
                                    <div class="col-sm-10">
                                        <label class="col-sm-3 control-label ">Backlog Summary :-</label>
                                        <span id="BacklogSummary"></span>
                                    </div>
                                </div>
                                <div class="form-group  has-feedback">
                                    <div class="col-sm-10">
                                        <label class="col-sm-3 control-label ">Amount In Word :-</label>
                                        @Html.DisplayFor(m => m.FeeInWord)
                                        @*<span class="pull-left" id="FeeInWord"></span>*@
                                    </div>
                                    <label class="col-sm-1 control-label text-right">Total :</label>
                                    <div class="col-sm-1 text-right" id="divTotal">
                                        @Html.DisplayFor(m => m.Total)
                                    </div>
                                </div>
                                @*<div class="form-group  has-feedback">
                                        <div class="col-sm-10">
                                            <span id="BacklogSummary"></span>
                                        </div>
                                        <label class="col-sm-1 control-label text-right">Total:</label>
                                        <div class="col-sm-1 text-right" id="divTotal">
                                            @Html.DisplayFor(m => m.Total)
                                        </div>
                                    </div>
                                    <div class="form-group  has-feedback">
                                        <label class="col-sm-2 control-label ">Amount In Word :-</label><span class="pull-left" id="FeeInWord"></span>
                                    </div>*@
                            </div>
                            @*<div class="panel panel-info">
                                    <div class="panel-heading"><strong>Fee Details</strong></div>
                                    <div class="form-group  has-feedback">
                                        <label class="col-sm-3 control-label">Exam Fee :</label>
                                        <div class="col-sm-2">
                                            <div class="input-group">
                                                @Html.DisplayFor(m => m.ExamFee)
                                            </div>
                                        </div>
                                        <label class="col-sm-offset-2 col-sm-3 control-label ">Backlog Fee :</label>
                                        <div class="col-sm-2">
                                            <div class="input-group">
                                                @Html.DisplayFor(m => m.BacklogFee)
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group  has-feedback">
                                        <label class="col-sm-3 control-label">Statement Marks Fee:</label>
                                        <div class="col-sm-2">
                                            <div class="input-group">
                                                @Html.DisplayFor(m => m.StatementOfMarksFee)
                                            </div>
                                        </div>
                                        <label class="col-sm-offset-2 col-sm-3 control-label ">Passing Certificate Fee :</label>
                                        <div class="col-sm-2">
                                            <div class="input-group">
                                                @Html.DisplayFor(m => m.CertificateOfPassingFee)
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group  has-feedback">
                                        <label class="col-sm-3 control-label">CAP Fee :</label>
                                        <div class="col-sm-2">
                                            @Html.DisplayFor(m => m.CAPFee)
                                        </div>

                                        <label class="col-sm-offset-2 col-sm-3 control-label ">Late Fee :</label>
                                        <div class="col-sm-2">
                                            @Html.DisplayFor(m => m.LateFee)
                                        </div>
                                    </div>
                                    <div class="form-group  has-feedback">
                                        <label class="col-sm-3 control-label">Super Late Fee :</label>
                                        <div class="col-sm-2">
                                            @Html.DisplayFor(m => m.SuperLateFee)
                                        </div>
                                        <label class="col-sm-offset-2 col-sm-3 control-label ">Environmental Studies Fee :</label>
                                        <div class="col-sm-2">
                                            @Html.DisplayFor(m => m.EnvironmentalExaminationFee)
                                        </div>
                                    </div>
                                </div>
                                <hr />

                                <div class="col-sm-10">
                                    <label class="col-sm-3 control-label ">Backlog Summary:-</label>
                                    <span id="BacklogSummary"></span>
                                </div>*@

                            @*<div class="form-group  has-feedback">
                                <div class="col-sm-10">
                                    <label class="col-sm-3 control-label ">Amount In Word :-</label><span class="pull-left" id="FeeInWord"></span>
                                </div>
                                <label class="col-sm-1 control-label text-right">Total:</label>
                                <div class="col-sm-1 text-right" id="divTotal">
                                    @Html.DisplayFor(m => m.Total)
                                </div>
                            </div>*@
                            @*<div class="form-group  has-feedback">
                                    <label class="col-sm-3 control-label">Total :</label>
                                    <div class="col-sm-2">
                                        @Html.DisplayFor(m => m.Total)
                                    </div>
                                </div>*@
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2">
                            <button type="button" value="Index" class="btn btn-primary btn-label-left pull-left" onclick="location.href = '@Url.Action("Index", "Exam")'">
                                <span><i class="fa fa-list-ul"></i></span>
                                Back to List
                            </button>
                        </div>
                        <div class="col-sm-offset-8 col-sm-2">
                            <button type="submit" value="Edit" title="Save" class="btn btn-primary btn-label-left pull-right">
                                <span><i class="fa fa-save"></i></span>
                                Save
                            </button>
                        </div>
                    </div>
                </div>
            </div>
          
        </div>
    </div>
</div>


<script type="text/javascript">

    function PrintForm() {
        alert("In Print");
        $("#printDiv").printThis();
    }

    $(document).ready(function () {
        // Add tooltip to form-controls
        $('.form-control').tooltip();

        // Load example of form validation
        LoadBootstrapValidatorScript(DemoFormValidator);

    });

</script>

