@using Corno.Data.Helpers
@using Corno.Globals.Constants
@using Kendo.Mvc.UI
@model Corno.Data.Corno.Masters.CoursePart

@{
    var formEnabled = ViewData[ModelConstants.FormEnabled].ToBoolean();
}

<div class="">
    <div class="col-sm-10">
        <div class="form-group row">
            @(Html.Kendo().CheckBoxFor(m => m.IsBranchApplicable)
                    .HtmlAttributes(new { @class = "w-100" })
                    .Label("Branch Applicable")
                    )
        </div>
        <div class="form-group row">
            @(Html.Kendo().MultiColumnComboBoxFor(m => m.FacultyId)
                    .DataTextField(ModelConstants.Name)
                    .DataValueField(ModelConstants.Id)
                    .HtmlAttributes(new { @class = "w-100" })
                    .Filter("contains")
                    .Placeholder("Select ...")
                    .Label(label => label
                        .Content("Faculty")
                        .Floating(true))
                    .Columns(columns =>
                    {
                        columns.Add().Field(ModelConstants.Id).Title(ModelConstants.Id).Width("100px");
                        columns.Add().Field(ModelConstants.Name).Title(ModelConstants.Name).Width("600px");
                    })
                    .DataSource(dataSource => dataSource
                        .Read(read => read.Action("GetFaculties", "Corno"))
                    ))
        </div>

        <div class="form-group row">
            @(Html.Kendo().MultiColumnComboBoxFor(m => m.CourseId)
                    //.Enable(Model.EnableHeader)
                    .DataTextField(ModelConstants.NameWithId)
                    .DataValueField(ModelConstants.Id)
                    .HtmlAttributes(new { @class = "w-100" })
                    .Filter("contains")
                    .Placeholder("Select ...")
                    .Label(label => label
                        .Content("Course")
                        .Floating(true))
                    .Columns(columns =>
                    {
                        columns.Add().Field(ModelConstants.Id).Width("100px");
                        columns.Add().Field(ModelConstants.Code).Width("100px");
                        columns.Add().Field(ModelConstants.NameWithId).Width("600px");
                    })
                    .DataSource(dataSource =>
                    {
                        dataSource.Read(read =>
                        {
                            read.Action("GetCoursesByFaculty", "Corno").Data("filterCourses");
                        })
                            .ServerFiltering(true);
                    })
                    .Enable(false)
                    .AutoBind(false)
                    .CascadeFrom(ModelConstants.FacultyId))
            <script>
                function filterCourses() {
                    return {
                        facultyId: $("#FacultyId").val(),
                    };
                }
            </script>
        </div>


    </div>
</div>